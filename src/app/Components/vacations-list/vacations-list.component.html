<div class="search-container">
  <input type="text" [(ngModel)]="searchTerm" placeholder="ุงุจุญุซ ุนู ุงูููุธู ุฃู ููุน ุงูุฅุฌุงุฒุฉ" class="search-input"
    dir="rtl" />
  <i class="fas fa-search search-icon"></i>
</div>

<div class="toggle-buttons">
  <button class="toggle-button" (click)="toggleTable('myVacations')" [class.active]="showMyVacations">
    ุฅุฌุงุฒุงุชู
  </button>
  <button class="toggle-button" (click)="toggleTable('employeeVacations')" [class.active]="!showMyVacations">
    ุฅุฌุงุฒุงุช ุงูููุธููู
  </button>
</div>

<div *ngIf="isLoading" class="spinner">
  Loading...
</div>

<div *ngIf="!isLoading && errorMessage" class="error-message">
  {{ errorMessage }}
</div>

<!-- My Vacations Table -->
<div *ngIf="!isLoading && showMyVacations && !errorMessage">
  <h2>ุฅุฌุงุฒุงุชู</h2>
  <div class="table-container">
    <table class="vacation-table" dir="rtl">
      <thead>
        <tr>
          <th>ุชุงุฑูุฎ ุจุฏุก ุงูุฅุฌุงุฒุฉ</th>
          <th>ุชุงุฑูุฎ ููุงูุฉ ุงูุฅุฌุงุฒุฉ</th>
          <th>ูุฏุฉ ุงูุฅุฌุงุฒุฉ</th>
          <th>ููุน ุงูุฅุฌุงุฒุฉ</th>
          <th>ุญุงูุฉ ุงูุฅุฌุงุฒุฉ</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vacation of myVacations">
          <td>{{ vacation.vacationStartDate | date: 'MMM dd, yyyy' }}</td>
          <td>{{ vacation.vacationEndDate | date: 'MMM dd, yyyy' }}</td>
          <td>{{ vacation.vacationDays }}</td>
          <td>{{ vacation.vacationType }}</td>
          <td>
            <span *ngIf="vacation.state === 'ููุจููุฉ'" class="status accepted">โ๏ธ ููุจููุฉ</span>
            <span *ngIf="vacation.state === 'ูุฑููุถุฉ'" class="status rejected">โ ูุฑููุถุฉ</span>
            <span *ngIf="vacation.state === 'ููุฏ ุงูุงูุชุธุงุฑ'" class="status pending">๐ ููุฏ ุงูุชูููุฐ</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Employee Vacations Table -->
<div *ngIf="!isLoading && !showMyVacations && !errorMessage">
  <h2>ุฅุฌุงุฒุงุช ุงูููุธููู</h2>
  <div class="table-container">
    <table class="vacation-table" dir="rtl">
      <thead>
        <tr>
          <th>ุงุณู ุงูููุธู</th>
          <th>ุงููุณู</th>
          <th>ุชุงุฑูุฎ ุจุฏุก ุงูุฅุฌุงุฒุฉ</th>
          <th>ุชุงุฑูุฎ ููุงูุฉ ุงูุฅุฌุงุฒุฉ</th>
          <th>ูุฏุฉ ุงูุฅุฌุงุฒุฉ</th>
          <th>ููุน ุงูุฅุฌุงุฒุฉ</th>
          <th>ุญุงูุฉ ุงูุฅุฌุงุฒุฉ</th>
          <th>ุฅุฌุฑุงุก</th>
        </tr>
        </thead>
        <tbody>
          <tr *ngFor="let employee of filteredEmployees">
            <td>
            <img [src]="employee.profilePicture" alt="ุตูุฑุฉ ุงูููุธู" class="profile-img" />
            <span class="employee-name">{{ employee.name }}</span>
            </td>
          <td>{{ employee.department }}</td>
          <td>{{ employee.vacationStartDate | date: 'MMM dd, yyyy' }}</td>
          <td>{{ employee.vacationEndDate | date: 'MMM dd, yyyy' }}</td>
          <td>{{ employee.vacationDays }}</td>
          <td>{{ employee.vacationType }}</td>
          <td>
            <span *ngIf="employee.state === 'ููุจููุฉ'" class="status accepted">โ๏ธ ููุจููุฉ</span>
            <span *ngIf="employee.state === 'ูุฑููุถุฉ'" class="status rejected">โ ูุฑููุถุฉ</span>
            <span *ngIf="employee.state === 'ููุฏ ุงูุงูุชุธุงุฑ'" class="status pending">๐ ููุฏ ุงูุชูููุฐ</span>
          </td>
          <td>
            <ng-container *ngIf="employee.state === 'ููุฏ ุงูุงูุชุธุงุฑ'; else noAction">
              <button pButton type="button" label="ููุงููุฉ" icon="pi pi-check" class="approve-btn"
                (click)="approveVacation(employee.id)">
              </button>
              <button pButton type="button" label="ุฑูุถ" icon="pi pi-times" class="reject-btn"
                (click)="rejectVacation(employee.id)">
              </button>
            </ng-container>
            <ng-template #noAction>
              <span>-</span>
            </ng-template>
          </td>
          </tr>
          <tr *ngIf="filteredEmployees.length === 0">
            <td colspan="8" class="empty-message">ูุง ุชูุฌุฏ ุฅุฌุงุฒุงุช ูุนุฑุถูุง.</td>
        </tr>
        </tbody>
        </table>
  </div>
  </div>