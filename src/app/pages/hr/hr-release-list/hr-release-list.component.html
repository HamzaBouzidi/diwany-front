<div class="toggle-container">
 <button class="toggle-button" [class.active]="currentView === 'releases'" (click)="toggleView('releases')">
  ุทูุจุงุช ุงูุฅุฎูุงุก
 </button>
 <button class="toggle-button" [class.active]="currentView === 'work-periods'" (click)="toggleView('work-periods')">
  ูุชุฑุงุช ุงูุนูู
 </button>
</div>
<div *ngFor="let notification of notifications; let i = index" class="notification-popup">
  <span>{{ notification }}</span>
  <button class="close-btn" (click)="closeNotification(i)">x</button>
</div>
<div class="search-container">
 <input type="text" [(ngModel)]="searchTerm" placeholder="ุงุจุญุซ ุนู ุงููุฏูุฑ ุฃู ุงูุฅุฏุงุฑุฉ ุฃู ุงูููุธู" class="search-input"
  dir="rtl" />
 <i class="fas fa-search search-icon"></i>
</div>

<!-- Releases Table -->
<div *ngIf="currentView === 'releases' && !isLoading && !errorMessage">
 <div class="table-container">
  <table class="release-table" dir="rtl">
   <thead>
    <tr>
     <th>ุงุณู ุงูููุธู</th>
     <th>ุงูุฅุฏุงุฑุฉ</th>
     <th>ุงุณู ุงููุฏูุฑ</th>
     <th>ุงูุญุงูุฉ</th>
    </tr>
   </thead>
   <tbody>
    <tr *ngFor="let release of filteredReleases.slice().reverse()" (click)="showReason(release)" class="clickable-row"
      [ngClass]="{ 'highlight-pending': release.isPending }">
     <td>{{ release.employeeName }}</td>
     <td>{{ release.department }}</td>
     <td>{{ release.directorName }}</td>
     <td>
      <span *ngIf="release.state === 'Approved'" class="status accepted">โ๏ธ ููุจููุฉ</span>
      <span *ngIf="release.state === 'Rejected'" class="status rejected">โ ูุฑููุถุฉ</span>
      <span *ngIf="release.state === 'Pending'" class="status pending">๐ ููุฏ ุงูุชูููุฐ</span>
     </td>
    </tr>
    <tr *ngIf="filteredReleases.length === 0">
     <td colspan="4" class="empty-message">ูุง ุชูุฌุฏ ุทูุจุงุช ุฅุฎูุงุก ูุนุฑุถูุง.</td>
    </tr>
   </tbody>
  </table>
 </div>
</div>
<!-- Work Periods Table -->
<div *ngIf="currentView === 'work-periods' && !isLoading && !errorMessage">
  <div class="table-container">
    <table class="work-period-table" dir="rtl">
      <thead>
        <tr>
          <th>ุงุณู ุงูููุธู</th>
          <th>ุจุฏุงูุฉ ุงููุชุฑุฉ</th>
          <th>ููุงูุฉ ุงููุชุฑุฉ</th>
          <th>ุงูุญุงูุฉ</th>
        </tr>
        </thead>
        <tbody>
          <tr *ngFor="let period of filteredWorkPeriods.slice().reverse()" (click)="openEvaluationModal(period)"
            [ngClass]="{ 'highlight-pending': period.isPending }" class="clickable-row">
            <td>{{ period.employee_name }}</td>
            <td>{{ period.startDate }}</td>
            <td>{{ period.endDate }}</td>
          <td>
            <span *ngIf="period.state === 'Done'" class="status accepted">โ๏ธ ุชู</span>
            <span *ngIf="period.state === 'Pending'" class="status pending">๐ ููุฏ ุงูุชูููุฐ</span>
          </td>

        </tr>
        <tr *ngIf="filteredWorkPeriods.length === 0">
          <td colspan="5" class="empty-message">ูุง ุชูุฌุฏ ูุชุฑุงุช ุนูู ูุนุฑุถูุง.</td>
          </tr>
          </tbody>
          </table>
          </div>
          </div>
          <div *ngIf="isEvaluationModalVisible" class="modal">
            <div class="modal-content">
              <button class="close-button" (click)="closeEvaluationModal()">โ</button>
              <h3>ุชูููู ุงูุฃุฏุงุก</h3>
          
              <!-- Evaluation Section -->
              <table class="evaluation-table" dir="rtl">
                <thead>
                  <tr>
                    <th>ุงูุจูุฏ</th>
                    <th>ุฃุนูู ูู ุงููุณุชูู</th>
                    <th>ูู ูุณุชูู ุงููุทููุจ</th>
                    <th>ุฃูู ูู ุงููุณุชูู</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ูุนุฑูุฉ ุงููุธููุฉ</td>
                    <td><input type="radio" name="jobKnowledge" value="above average" [(ngModel)]="evaluationData.job_knowledge">
                    </td>
                    <td><input type="radio" name="jobKnowledge" value="average" [(ngModel)]="evaluationData.job_knowledge"></td>
                    <td><input type="radio" name="jobKnowledge" value="below standard" [(ngModel)]="evaluationData.job_knowledge">
                    </td>
                  </tr>
                  <tr>
                    <td>ุงูุงุชูุงููุฉ</td>
                    <td><input type="radio" name="jobMastery" value="above average" [(ngModel)]="evaluationData.job_mastery"></td>
                    <td><input type="radio" name="jobMastery" value="average" [(ngModel)]="evaluationData.job_mastery"></td>
                    <td><input type="radio" name="jobMastery" value="below standard" [(ngModel)]="evaluationData.job_mastery">
                    </td>
                  </tr>
                  <tr>
                    <td>ููุงุฑุงุช ุงูุชุนุงูู ูุน ุงูุขุฎุฑูู</td>
                    <td><input type="radio" name="teamwork" value="above average"
                        [(ngModel)]="evaluationData.job_communication_skills"></td>
                    <td><input type="radio" name="teamwork" value="average" [(ngModel)]="evaluationData.job_communication_skills">
                    </td>
                    <td><input type="radio" name="teamwork" value="below standard"
                        [(ngModel)]="evaluationData.job_communication_skills"></td>
                  </tr>
                  <tr>
                    <td>ุญู ุงููุดููุงุช</td>
                    <td><input type="radio" name="problemSolving" value="above average"
                        [(ngModel)]="evaluationData.job_problem_solving"></td>
                    <td><input type="radio" name="problemSolving" value="average"
                        [(ngModel)]="evaluationData.job_problem_solving"></td>
                    <td><input type="radio" name="problemSolving" value="below standard"
                        [(ngModel)]="evaluationData.job_problem_solving"></td>
                  </tr>
                  <tr>
                    <td>ุฅุฏุงุฑุฉ ุงูููุช</td>
                    <td><input type="radio" name="timeManagement" value="above average"
                        [(ngModel)]="evaluationData.job_time_management"></td>
                    <td><input type="radio" name="timeManagement" value="average"
                        [(ngModel)]="evaluationData.job_time_management"></td>
                    <td><input type="radio" name="timeManagement" value="below standard"
                        [(ngModel)]="evaluationData.job_time_management"></td>
                  </tr>
                  <tr>
                    <td>ุงูุชูููุฑ ูุงุชุฎุงุฐ ุงููุฑุงุฑุงุช</td>
                    <td><input type="radio" name="decisionMaking" value="above average"
                        [(ngModel)]="evaluationData.job_decision_making"></td>
                    <td><input type="radio" name="decisionMaking" value="average"
                        [(ngModel)]="evaluationData.job_decision_making"></td>
                    <td><input type="radio" name="decisionMaking" value="below standard"
                        [(ngModel)]="evaluationData.job_decision_making"></td>
                  </tr>
                </tbody>
              </table>
<button class="done-button" (click)="submitEvaluation()">ุชู</button>
  </div>
</div>


<!-- Modal for showing reasons -->
<div *ngIf="isModalVisible" class="modal">
 <div class="modal-content">
  <button class="close-button" (click)="closeModal()">โ</button>
  <h3>ุงูุณุจุจ</h3>
  <p>{{ selectedReason }}</p>
 </div>
</div>